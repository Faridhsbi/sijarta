{% extends 'base.html' %}
{% block meta %}
    <title>Diskon</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
<br/><br/><br/><br/>
<h1 class="text-4xl font-bold text-center text-blue-600 mt-8">DISKON</h1>

<h2 class="text-2xl font-semibold text-center mt-8">VOUCHER</h2>

<!-- Voucher Table -->
<div class="overflow-x-auto max-w-screen-lg mx-auto mt-6">
    <table class="min-w-full table-auto bg-white border-collapse shadow-md">
        <thead>
            <tr class="bg-blue-600 text-white">
                <th class="px-6 py-3 text-left">Kode</th>
                <th class="px-6 py-3 text-left">Potongan</th>
                <th class="px-6 py-3 text-left">Min Transaksi Pemesanan</th>
                <th class="px-6 py-3 text-left">Jumlah Hari Berlaku</th>
                <th class="px-6 py-3 text-left">Kuota Penggunaan</th>
                <th class="px-6 py-3 text-left">Harga</th>
                <th class="px-6 py-3 text-center">Aksi</th>
            </tr>
        </thead>
        <tbody>
            <tr class="border-b hover:bg-blue-50">
                <td class="px-6 py-4">DISC10</td>
                <td class="px-6 py-4">10%</td>
                <td class="px-6 py-4">Rp 100.000</td>
                <td class="px-6 py-4">30 Hari</td>
                <td class="px-6 py-4">5</td>
                <td class="px-6 py-4">Rp 10.000</td>
                <td class="px-6 py-4 text-center">
                    <button onclick="buyVoucher(15000, 10000)" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Beli</button>
                </td>
            </tr>
            <tr class="border-b hover:bg-blue-50">
                <td class="px-6 py-4">DISC20</td>
                <td class="px-6 py-4">20%</td>
                <td class="px-6 py-4">Rp 200.000</td>
                <td class="px-6 py-4">15 Hari</td>
                <td class="px-6 py-4">3</td>
                <td class="px-6 py-4">Rp 20.000</td>
                <td class="px-6 py-4 text-center">
                    <button onclick="buyVoucher(15000, 20000)" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">Beli</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<h2 class="text-2xl font-semibold text-center mt-12">PROMO</h2>

<!-- Promo Table -->
<div class="overflow-x-auto max-w-screen-lg mx-auto mt-6">
    <table class="min-w-full table-auto bg-white border-collapse shadow-md">
        <thead>
            <tr class="bg-blue-600 text-white">
                <th class="px-6 py-3 text-left">Kode</th>
                <th class="px-6 py-3 text-left">Tanggal Akhir Berlaku</th>
            </tr>
        </thead>
        <tbody>
            <tr class="border-b hover:bg-blue-50">
                <td class="px-6 py-4">PROMO50</td>
                <td class="px-6 py-4">2024-12-31</td>
            </tr>
            <tr class="border-b hover:bg-blue-50">
                <td class="px-6 py-4">PROMO100</td>
                <td class="px-6 py-4">2024-11-30</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Success Modal -->
<div id="success-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-1/2">
        <span class="absolute top-4 right-4 text-gray-500 text-2xl cursor-pointer" onclick="closeModal('success-modal')">&times;</span>
        <h2 class="text-3xl text-green-500 text-center">SUKSES</h2>
        <p class="text-center mt-4">SELAMAT Anda berhasil membeli voucher kode XXX. Voucher ini akan berlaku hingga tanggal XX/XX/XXXX dengan kuota penggunaan sebanyak X kali.</p>
        <button class="mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition" onclick="closeModal('success-modal')">Close</button>
    </div>
</div>

<!-- Error Modal -->
<div id="error-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-1/2">
        <span class="absolute top-4 right-4 text-gray-500 text-2xl cursor-pointer" onclick="closeModal('error-modal')">&times;</span>
        <h2 class="text-3xl text-red-500 text-center">GAGAL</h2>
        <p class="text-center mt-4">Maaf, saldo Anda tidak cukup untuk membeli voucher ini.</p>
        <button class="mt-6 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition" onclick="closeModal('error-modal')">Close</button>
    </div>
</div>

<script>
    // JavaScript to handle modals
    function openModal(modalId) {
        document.getElementById(modalId).style.display = "flex";
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
    }

    // Simulating voucher purchase logic
    function buyVoucher(userBalance, voucherPrice) {
        if (userBalance >= voucherPrice) {
            openModal('success-modal'); // Open success modal
        } else {
            openModal('error-modal'); // Open error modal
        }
    }
</script>

{% endblock %}
